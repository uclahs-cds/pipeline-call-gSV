// EXECUTION SETTINGS AND GLOBAL DEFAULTS

// External config files import
includeConfig 'path/to/another.config

// Inputs/parameters of the pipeline
params {
     // sample inputs
    input_csv = "path/to/input/csv/"
    variable_name = "foo-bar"

    // input/output locations
    output_dir = "where/to/save/outputs/"
    temp_dir = "path/to/temp/dir/for/intermediate/files"

    // resource configuraton for resource_allocation_tool_name_command_name
    tool_name_command_name_slurm_worker_node_type = "slurm partition type" // (e.g: lowmem, midmem and execute)
    tool_name_command_name_number_of_parallel_jobs = n // number of processes that can be ran at the same time 
    tool_name_command_name_number_of_cpus = n // number of cores (e.g: 2)
    tool_name_command_name_memory = "n GB" // amount of memory (e.g 2B, 2KB, 2MB, 2GB or 2TB)
}

// Metadata
manifest {
    name = 'pipeline-name-nf'
    author = 'Authors Name'
    description = 'A template for Nextflow pipelines'
    version = 'Version Number'
}

// Process specific scope
process {
    cache = true 
    executor = "slurm" // or executor = "local" 
    // Other directives or options that should apply for every process

    // Please note that queue, cpu and mem will not work if executor = "local" 
    withName: resource_allocation_tool_name_command_name {
        queue = params.tool_name_command_name_slurm_worker_node_type
        maxForks = params.tool_name_command_name_number_of_parallel_jobs
        cpus = params.tool_name_command_name_number_of_cpus
        memory = params.tool_name_command_name_memory
        // Other directives or options that apply to that specific process
    }
}

// location of Nextflow temp directories  
workDir = params.temp_dir
NXF_WORK = params.temp_dir
NXF_TEMP = params.temp_dir
NXF_HOME = params.temp_dir

// Other scopes - https://www.nextflow.io/docs/latest/config.html#config-scopes
docker {
    enabled = true
}

// pipeline monitoring and metric files
timeline {
    enabled = true
    file = "${params.output_dir}/timeline.html"
}

trace {
    enabled = true
    file = "${params.output_dir}/trace.txt"
}

report {
    enabled = true
    file = "${params.output_dir}/report.html"
}